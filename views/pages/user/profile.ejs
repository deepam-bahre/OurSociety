<%- include('../../partials/header'); %> 
<% if(message.profileSuccess){ %>
   <div class="alert alert-success" role="alert" id="successMessage">
      <%= message.profileSuccess %>
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
         <span aria-hidden="true">Ã—</span>
   </div>
   <% } %>
   <% if (profile.length >0) { %>
   <% profile.map((result)=>{%>
   <p class="profile-note"><em><span>*</span> Don't worry this details is visible to you only.</em></p>
   <div class="user-profile">
   <div class="container">
   <div class="row">
   <div class="col-md-4 col-sm-12">
   <div class="userImage-container">
   <img src="<%=result.profile_img%>" class="img-fluid" id="userimage">
   </div>
   </div>
   <div class="col-md-8 col-sm-12">
   <div class="user-details">
   <p><b>Username:</b><span><%=result.username%></span></p>
   <p><b>Full Name:</b><span><%=result.name%></span></p>
   <p><b>Email:</b><span><%=result.email%></span></p>
   <p><b>Block & Flat No.:</b><span><%=result.address%></span></p>
   <p><b>Phone:</b><span><%=result.phone%></span></p>
   <input type="hidden" value="<%=result.role%>" name="role">
   <input type="hidden" value="<%=result.uid%>" name="uid">
   <br>
   <button class="btn btn-small bcm-btn-red" data-toggle="modal" data-target="#updateProfile<%=result._id%>" data-backdrop="static" data-keyboard="false"> Update Profile </button>
   <div id="updateProfile<%=result._id%>" class="modal fade" role="dialog">
   <div class="modal-dialog">
   <div class="modal-content">
   <div class="modal-header">
   <button type="button" class="close" data-dismiss="modal">&times;</button>
   <h4 class="modal-title">Update Profile</h4>
   </div>
   <div class="modal-body">
   <form action="/updateProfile" method="POST" enctype='multipart/form-data'>
   <div class="form-group">
   <input type="text" class="form-control" placeholder="Username" name="username" value="<%=result.username%>" required>
   </div>
   <div class="form-group">
   <input type="text" class="form-control" placeholder="Full Name" name="name" value="<%=result.name%>" required>
   </div>
   <div class="form-group">
   <input type="email" class="form-control" placeholder="Email" name="email" value="<%=result.email%>" required>
   </div>
   <input type="hidden" value="<%=role%>" name="role">
   <div class="form-group">
   <span class="note-heading"><input type="text" class="form-control" placeholder="Block & Flat No." name="address" value="<%=result.address%>" required><em>Please enter block number & flat no.(example B-402)</em></span>
   </div>
   <div class="form-group">
   <input type="text" class="form-control" placeholder="Phone No." name="phone" value="<%=result.phone%>" required>
   </div>
   <div class="form-group">
   <input class="form-control" type="file" name="image" id="image" required>
   </div>
   <input type="hidden" value="<%=result.uid%>" name="uid">
   <div class="form-group">
   <input type="hidden" value="<%=result._id%>" name="id">
   <button class="btn btn-small bcm-btn-red"  type="submit">update</button>
   </div>
   </form>
   </div>
   </div>
   </div>
   </div>
   </div>
   </div>
   </div>
   </div>
   </div>
   <% }) %>
   <% } else { %>
   <p class="profile-note"><em><span>*</span> Don't worry this details is visible to you only.</em></p>
   <div class="user-profile">
      <div class="container">
         <div class="container">
            <div class="row">
               <div class="col-md-6 col-sm-12">
                  <div class="userImage-container">
                     <img src="<%=profile_img%>" class="img-fluid" id="userimage">
                  </div>
               </div>
               <div class="col-md-6 col-sm-12">
                  <div class="user-details">
                     <p><b>Name:</b><span><%=name%></span> </p>
                     <p><b>Username:</b><span><%=username%></span> </p>
                     <p><b>Email:</b><span><%=email%></span> </p>
                     <br>
                     <button class="btn btn-small bcm-btn-red" data-toggle="modal" data-target="#createProfile<%=id%>"> Update Profile </button>
                     <div id="createProfile<%=id%>" class="modal fade" role="dialog">
                        <div class="modal-dialog">
                           <div class="modal-content">
                              <div class="modal-header">
                                 <button type="button" class="close" data-dismiss="modal">&times;</button>
                                 <h4 class="modal-title">Update Profile</h4>
                              </div>
                              <div class="modal-body">
                                 <form action="/createProfile" method="POST" enctype='multipart/form-data'>
                                    <div class="form-group">
                                       <input type="text" class="form-control" placeholder="Username" name="username" value="<%=username%>" required>
                                    </div>
                                    <div class="form-group">
                                       <input type="text" class="form-control" placeholder="Full Name" name="name" value="<%=name%>" required>
                                    </div>
                                    <div class="form-group">
                                       <input type="email" class="form-control" placeholder="Email" name="email" value="<%=email%>" required>
                                    </div>
                                    <input type="hidden" value="<%=role%>" name="role">
                                    <div class="form-group">
                                       <span class="note-heading"><input type="text" class="form-control" placeholder="Block & Flat No." name="address" value="" required><em>Please enter block number & flat no.(example B-402)</em></span>
                                    </div>
                                    <div class="form-group">
                                       <input type="text" class="form-control" placeholder="Phone No." name="phone" value="" required>
                                    </div>
                                    <div class="form-group">
                                       <input class="form-control" type="file" name="image" id="image" required>
                                    </div>
                                    <input type="hidden" value="<%=id%>>" name="uid">
                                    <div class="form-group">
                                       <button class="btn btn-small bcm-btn-red"  type="submit">update</button>
                                    </div>
                                 </form>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
   <% } %>
   <%- include('../../partials/footer'); %>
   <script type="text/javascript">
      setTimeout(function () {
          // Closing the alert
          $(' #successMessage').alert('close');
      },3000);
   </script>